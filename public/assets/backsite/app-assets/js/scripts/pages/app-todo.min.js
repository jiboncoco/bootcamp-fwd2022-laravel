var todoNewTasksidebar=$(".todo-new-task-sidebar"),appContentOverlay=$(".app-content-overlay"),sideBarLeft=$(".sidebar-left"),todoTaskListWrapper=$(".todo-task-list-wrapper"),todoItem=$(".todo-item"),selectAssignLable=$(".select2-assign-label"),selectUsersName=$(".select2-users-name"),avatarUserImage=$(".avatar-user-image"),updateTodo=$(".update-todo"),addTodo=$(".add-todo"),markCompleteBtn=$(".mark-complete-btn"),newTaskTitle=$(".new-task-title"),taskTitle=$(".task-title"),noResults=$(".no-results"),assignedAvatarContent=$(".assigned .avatar .avatar-content"),todoAppMenu=$(".todo-app-menu"),badgeColors={Frontend:"badge-primary",Backend:"badge-success",Issue:"badge-danger",Design:"badge-warning",Wireframe:"badge-info"};$((function(){"use strict";if($.app.menu.is_touch_device())$(".sidebar-menu-list").css("overflow","scroll"),$(".todo-new-task-sidebar").css("overflow","scroll"),$(".todo-task-list").css("overflow","scroll");else{if($(".todo-application .sidebar-menu-list").length>0)new PerfectScrollbar(".sidebar-menu-list",{theme:"dark",wheelPropagation:!1});if(todoNewTasksidebar.length>0)new PerfectScrollbar(".todo-new-task-sidebar",{theme:"dark",wheelPropagation:!1});if($(".todo-application .todo-task-list").length>0)new PerfectScrollbar(".todo-task-list",{theme:"dark",wheelPropagation:!1})}if($(".pickadate").daterangepicker({singleDatePicker:!0,showDropdowns:!0,locale:{format:"MM/DD"}}),dragula([document.getElementById("todo-task-list-drag")],{moves:function(e,t,o){return o.classList.contains("handle")}}),selectUsersName.select2({placeholder:"Unassigned",dropdownAutoWidth:!0,width:"100%"}),selectAssignLable.select2({dropdownAutoWidth:!0,width:"100%"}),$(".todo-application .sidebar-menu-list").length>0)new PerfectScrollbar(".sidebar-menu-list",{theme:"dark",wheelPropagation:!1});if(todoNewTasksidebar.length>0)new PerfectScrollbar(".todo-new-task-sidebar",{theme:"dark",wheelPropagation:!1});if($(".todo-application .todo-task-list").length>0)new PerfectScrollbar(".todo-task-list",{theme:"dark",wheelPropagation:!1});new Quill(".snow-container .compose-editor",{modules:{toolbar:".compose-quill-toolbar"},placeholder:"Add Description..... ",theme:"snow"}),new Quill(".snow-container .comment-editor",{modules:{toolbar:".comment-quill-toolbar"},placeholder:"Write a Comment...",theme:"snow"});$(".menu-toggle").on("click",(function(){sideBarLeft.removeClass("show"),appContentOverlay.removeClass("show"),todoNewTasksidebar.removeClass("show")})),appContentOverlay.on("click",(function(){sideBarLeft.removeClass("show"),appContentOverlay.removeClass("show")})),todoAppMenu.find(".list-group a").on("click",(function(){var e=$(this);todoAppMenu.find(".active").removeClass("active"),e.addClass("active")})),$(".add-task-btn").on("click",(function(){todoNewTasksidebar.addClass("show"),appContentOverlay.addClass("show"),sideBarLeft.removeClass("show"),avatarUserImage.addClass("d-none"),assignedAvatarContent.removeClass("d-none"),selectUsersName.val(null).trigger("change"),selectAssignLable.val(null).trigger("change"),updateTodo.addClass("d-none"),addTodo.removeClass("d-none"),markCompleteBtn.addClass("d-none"),newTaskTitle.removeClass("d-none"),taskTitle.val(""),$(".compose-editor .ql-editor")[0].innerHTML="",$(".comment-editor .ql-editor")[0].innerHTML="",selectAssignLable.attr("disabled","true")})),$(".todo-application .sidebar-close-icon").on("click",(function(){sideBarLeft.removeClass("show"),appContentOverlay.removeClass("show")})),addTodo.on("click",(function(){if(taskTitle.val().length>0){var e=taskTitle.val(),t=$(".select2-users-name option:selected").val(),o=Math.floor(100*Math.random()+Date.now()),a=$(".select2-assign-label option:selected"),s=[];a.each((function(){s.push($(this).text())}));var n=s.map((function(e){return'<span class="badge '+badgeColors[e]+' badge-pill ml-25"> '+e+" </span>"})),i=todoTaskListWrapper.find("[data-name='"+t+"']").find(".avatar img").attr("src");todoTaskListWrapper.append('<li class="todo-item" data-name="'+t+'"><div class="todo-title-wrapper d-flex justify-content-between align-items-center"><div class="todo-title-area d-flex"><i class="ft-more-vertical handle"></i><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="'+o+'"><label class="custom-control-label" for="'+o+'"></label></div><p class="todo-title mx-50 m-0 truncate">'+e+'</p></div><div class="todo-item-action d-flex align-items-center">'+n.join("")+'<div class="avatar ml-1">'+(void 0!==(l=i)?'<img src="'+l+'"alt="avatar" height="30" width="30" >':'<div class="avatar-content"><i class="ft-user font-medium-4"></i></div>')+'</div><a class="todo-item-favorite ml-50"><i class="ft-star"></i></a><a class="todo-item-delete ml-50"><i class="ft-trash-2"></i></a></div></div></li>'),todoNewTasksidebar.removeClass("show"),appContentOverlay.removeClass("show"),selectAssignLable.attr("disabled","true")}else todoNewTasksidebar.removeClass("show"),appContentOverlay.removeClass("show"),selectAssignLable.attr("disabled","true");var l})),$(".close-icon, .cancel-btn, .app-content-overlay, .mark-complete-btn").on("click",(function(){todoNewTasksidebar.removeClass("show"),appContentOverlay.removeClass("show"),setTimeout((function(){todoNewTasksidebar.find("textarea").val(""),$(".compose-editor .ql-editor")[0].innerHTML="",$(".comment-editor .ql-editor")[0].innerHTML="",selectAssignLable.attr("disabled","true")}),100)})),$(".add-tags").on("click",(function(){selectAssignLable.is("[disabled]")?selectAssignLable.removeAttr("disabled"):selectAssignLable.attr("disabled","true")})),updateTodo.on("click",(function(){todoNewTasksidebar.removeClass("show"),appContentOverlay.removeClass("show"),selectAssignLable.attr("disabled","true")})),$(document).on("keyup",".todo-search",(function(){todoItem=$(".todo-item"),$(".todo-item").css("animation","none");var e=$(this).val().toLowerCase();""!=e?(todoItem.filter((function(){$(this).toggle($(this).text().toLowerCase().includes(e))})),0==$(".todo-item:visible").length?noResults.hasClass("show")||noResults.addClass("show"):noResults.removeClass("show")):(todoItem.show(),noResults.hasClass("show")&&noResults.removeClass("show"))}));var e="";todoTaskListWrapper.on("click",".todo-item",(function(t){var o=$(this);e=o,todoNewTasksidebar.addClass("show"),appContentOverlay.addClass("show");var a=o.find(".todo-title").text();taskTitle.val(a),$(".compose-editor .ql-editor")[0].innerHTML=a,o.find(".avatar img").length?(avatarUserImage.removeClass("d-none"),assignedAvatarContent.addClass("d-none")):(avatarUserImage.addClass("d-none"),assignedAvatarContent.removeClass("d-none"));var s=o.find(".avatar img").attr("src");avatarUserImage.attr("src",s);var n=o.attr("data-name");if($(".select2-users-name").val(n).trigger("change"),$(this).find(".badge").length){var i=[];$(this).find(".badge").each((function(){var e=$(this).text();i.push(e),selectAssignLable.val(i).trigger("change")}))}else selectAssignLable.val(null).trigger("change");updateTodo.removeClass("d-none"),addTodo.addClass("d-none"),markCompleteBtn.removeClass("d-none"),newTaskTitle.addClass("d-none")})).on("click",".todo-item-favorite",(function(e){e.stopPropagation(),$(this).toggleClass("warning"),$(this).find("i").toggleClass("bxs-star")})).on("click",".todo-item-delete",(function(e){e.stopPropagation(),$(this).closest(".todo-item").remove()})).on("click",".custom-checkbox",(function(e){e.stopPropagation()})),todoTaskListWrapper.on("click",".todo-item .custom-control-input",(function(e){$(this).closest(".todo-item").toggleClass("completed")})),markCompleteBtn.on("click",(function(){e.addClass("completed"),e.find(".custom-control-input").prop("checked",!0),selectAssignLable.attr("disabled","true")})),$(".sidebar-toggle").on("click",(function(e){e.stopPropagation(),sideBarLeft.toggleClass("show"),appContentOverlay.addClass("show")})),$(".ascending").on("click",(function(){todoItem=$(".todo-item"),$(".todo-item").css("animation","none"),todoItem.sort((function(e,t){return $(t).find(".todo-title").text()<$(e).find(".todo-title").text()?1:-1})).appendTo(todoTaskListWrapper)})),$(".descending").on("click",(function(){todoItem=$(".todo-item"),$(".todo-item").css("animation","none"),todoItem.sort((function(e,t){return $(t).find(".todo-title").text()>$(e).find(".todo-title").text()?1:-1})).appendTo(todoTaskListWrapper)}))})),$(window).on("resize",(function(){$(window).width()>992&&appContentOverlay.hasClass("show")&&(sideBarLeft.removeClass("show"),appContentOverlay.removeClass("show"),todoNewTasksidebar.removeClass("show"))}));