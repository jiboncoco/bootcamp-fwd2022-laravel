$(window).on("load",(function(){var t=function(){d3.select("#pie-calendar");var t,r=1380,n=820,e=10,a=40,o="#EAEAEA",l="#FFFFFF",d=0,u=(new Date).getMonth(),c=["January","February","March","April","May","June","July","August","September","October","November","December"];function s(){return r-10}function f(){return n-40}function g(){return s()/7}function h(){return f()/5}function p(){var t=new Date;return t.setMonth(u+d),t.getMonth()}function m(){var t=new Date;return t.setMonth(u+d),t.getFullYear()}return{calendarWidth:r,calendarHeight:n,gridXTranslation:e,gridYTranslation:a,gridWidth:s(),gridHeight:f(),cellWidth:g(),cellHeight:h(),getDatesGroup:function(){return t},setDatesGroup:function(r){t=r},incrementCounter:function(){d+=1},decrementCounter:function(){d-=1},monthToDisplay:p(),monthToDisplayAsText:function(){return c[p()]},yearToDisplay:m,gridCellPositions:function(){var t=[];for(y=0;y<5;y++)for(x=0;x<7;x++)t.push([x*g(),y*h()]);return t}(),daysInMonth:function(){var t=[],r=new Date(m(),p(),1).getDay(),n=new Date(m(),p(),0).getDate();for(i=1;i<=r;i++)t.push([n-r+i,o]);var e=new Date(m(),p()+1,0).getDate();for(i=1;i<=e;i++)t.push([i,l]);var a=35-t.length;for(i=1;i<=a;i++)t.push([i,o]);return t.slice(0,35)}}}();function r(){t.decrementCounter(),e()}function n(){t.incrementCounter(),e()}function e(r,n){$("#currentMonth").text(t.monthToDisplayAsText()+" "+t.yearToDisplay());var e=t.daysInMonth(),i=t.gridCellPositions;t.datesGroup.selectAll("text").data(e).attr("x",(function(t,r){return i[r][0]})).attr("y",(function(t,r){return i[r][1]})).attr("dx",20).attr("dy",20).attr("transform","translate("+t.gridXTranslation+","+t.gridYTranslation+")").text((function(t){return t[0]})),t.calendar.selectAll("rect").data(e).style("fill",(function(t){return t[1]})),a()}function a(){var r=function(){for(var t=[],r=0;r<35;r++)t.push([Math.floor(100*Math.random()),Math.floor(100*Math.random()),Math.floor(100*Math.random())]);return t}(),n=t.cellWidth/3,e=d3.layout.pie(),a=d3.scale.ordinal().range(["#99B898","#FECEA8","#FF847C","#E84A5F","#F8B195","#F67280","#C06C84"]),o=d3.svg.arc().innerRadius(0).outerRadius(n),l=[];for(i=0;i<r.length;i++){var d=e(r[i]);for(j=0;j<d.length;j++)l.push([d[j],i,j])}var u=t.gridCellPositions;t.chartsGroup.selectAll("g.arc").remove();var c=t.chartsGroup.selectAll("g.arc").data(l).enter().append("g").attr("class","arc").attr("transform",(function(r){var e=r[1];return"translate("+(n+5*t.gridXTranslation+u[e][0])+", "+(n+1.25*t.gridYTranslation+u[e][1])+")"}));c.append("path").attr("fill",(function(t,r){return a(t[2])})).attr("d",(function(t,r){return o(t[0])})),c.append("text").attr("transform",(function(t,r){return"translate("+o.centroid(t[0])+")"})).attr("text-anchor","middle").text((function(t,r){return t[0].value})).style("fill","#FFF")}function o(){width=ele.node().getBoundingClientRect().width-margin.left-margin.right,container.attr("width",width+margin.left+margin.right),svg.attr("width",width+margin.left+margin.right),x.range([0,width]),svg.selectAll(".d3-xaxis").call(xAxis),svg.selectAll(".d3-line").attr("d",line)}$(document).ready((function(){!function(r,n){t.calendar=d3.select("#pie-calendar").append("svg").attr("class","calendar").attr("width",t.calendarWidth).attr("height",t.calendarHeight).append("g");var e=t.gridCellPositions;t.calendar.selectAll("rect").data(e).enter().append("rect").attr("x",(function(t){return t[0]})).attr("y",(function(t){return t[1]})).attr("width",t.cellWidth).attr("height",t.cellHeight).style("stroke","#555").style("fill","white").attr("transform","translate("+t.gridXTranslation+","+t.gridYTranslation+")");var i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];t.calendar.selectAll("headers").data([0,1,2,3,4,5,6]).enter().append("text").attr("x",(function(t){return e[t][0]})).attr("y",(function(t){return e[t][1]})).attr("dx",t.gridXTranslation+5).attr("dy",30).text((function(t){return i[t]})),t.datesGroup=t.calendar.append("svg:g");var o=t.daysInMonth();t.datesGroup.selectAll("daysText").data(o).enter().append("text").attr("x",(function(t,r){return e[r][0]})).attr("y",(function(t,r){return e[r][1]})).attr("dx",20).attr("dy",20).attr("transform","translate("+t.gridXTranslation+","+t.gridYTranslation+")").text((function(t){return t[0]})),t.chartsGroup=t.calendar.append("svg:g"),a()}(),e(),$("#back").on("click",r),$("#forward").on("click",n)})),$(window).on("resize",o),$(".menu-toggle").on("click",o)}));